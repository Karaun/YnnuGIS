:root{--primary:rgb(21,101,192);--primary-50:rgba(21,101,192,.1);--primary-100:rgba(21,101,192,.18);}

/* 地图顶部分段控制（类似TabControl） */
.map-topcontrol{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin:.25rem .25rem .5rem;background:#fff;border:1px solid #e6ebf2;border-radius:.9rem;padding:.4rem .5rem}
.seg-tabs{display:flex;gap:.25rem;background:#f1f5f9;border-radius:.7rem;padding:.25rem}
.seg-btn{appearance:none;border:0;background:transparent;color:#0f172a;padding:.4rem .7rem;border-radius:.6rem;font-size:.875rem;line-height:1;white-space:nowrap}
.seg-btn.is-active{background:#fff;color:var(--primary);box-shadow:0 1px 0 rgba(2,6,23,.04), 0 1px 8px rgba(2,6,23,.06)}
.map-topcontrol .btn-primary{padding:.45rem .8rem}

@media (max-width:480px){
  .map-topcontrol{border-radius:.75rem;padding:.35rem .4rem}
  .seg-btn{padding:.38rem .6rem;font-size:.85rem}
  .map-topcontrol .btn-primary{padding:.42rem .7rem}
}
.input{border:1px solid #d8dee9;border-radius:.75rem;padding:.625rem .875rem;outline:none;background:#fff;transition:box-shadow .15s,border-color .15s}
.input:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-100)}
.btn-primary{background:var(--primary);color:#fff;border-radius:.75rem;padding:.5rem 1rem;font-weight:600;transition:filter .15s,transform .02s}
.btn-primary:hover{filter:brightness(1.05)}
.btn-primary:active{transform:translateY(1px)}
.btn-primary[disabled]{opacity:.6;cursor:not-allowed}
.btn-secondary{background:var(--primary-50);color:#0f172a;border-radius:.75rem;padding:.5rem 1rem;font-weight:600;transition:background .15s,color .15s}
.btn-secondary:hover{background:rgba(21,101,192,.14)}
.btn-secondary[disabled]{opacity:.6;cursor:not-allowed}
.card{background:#fff;border-radius:1rem;box-shadow:0 10px 20px rgba(2,6,23,.06);position:relative}
.tab-active{color:var(--primary);font-weight:700}
.list-item{padding:.85rem .75rem;border-bottom:1px solid #e6ebf2;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,.02))}
.badge{display:inline-block;background:rgba(21,101,192,.12);color:#0b3d73;border-radius:9999px;padding:.125rem .5rem;font-size:.75rem}
.map-toolbar{position:absolute;top:calc(env(safe-area-inset-top,0) + .5rem);left:.5rem;right:.5rem;display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;z-index:1000}
.map-toolbar .btn{background:rgba(255,255,255,.95);backdrop-filter:blur(6px);border:1px solid var(--primary-100);border-radius:.75rem;padding:.5rem .75rem;font-size:.875rem;min-width:72px;white-space:nowrap}
.map-toolbar select.btn{max-width:60vw}

@media (max-width:480px){
  .map-toolbar{gap:.4rem}
  .map-toolbar .btn{font-size:.8125rem;padding:.45rem .65rem}
  .map-toolbar select.btn{max-width:70vw}
}

/* 底部浮动操作栏，提升地图页美观度与不重叠性 */
.map-bottombar{position:absolute;left:.75rem;right:.75rem;bottom:calc(env(safe-area-inset-bottom,0) + .75rem);display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:flex-start;z-index:1001;background:rgba(255,255,255,.94);backdrop-filter:blur(8px);border:1px solid var(--primary-100);border-radius:1rem;padding:.5rem .75rem;box-shadow:0 6px 20px rgba(2,6,23,.12)}
.map-bottombar .btn{background:transparent;border:0;border-radius:.75rem;padding:.5rem .75rem;font-size:.9rem;min-width:72px;white-space:nowrap;color:#0f172a}
.map-bottombar select.btn{border:1px solid var(--primary-100);background:#fff;max-width:70vw}

@media (max-width:480px){
  .map-bottombar{gap:.4rem;padding:.45rem .6rem}
  .map-bottombar .btn{font-size:.85rem;padding:.45rem .6rem}
}

/* 主题顶部/底部矩形条 */
.theme-strip{width:100%;height:12px;background:var(--primary);display:none}
.link-primary{color:var(--primary)}

/* 底部固定导航栏（主题色） */
.tabbar{position:fixed;left:0;right:0;bottom:0;z-index:1100;background:rgba(255,255,255,.92);backdrop-filter:blur(10px);border-top:1px solid var(--primary-100);padding:calc(env(safe-area-inset-bottom,0) + .35rem) .6rem .35rem;display:flex;justify-content:space-around;gap:.5rem;box-shadow:0 -6px 16px rgba(0,0,0,.12)}
.tabbar-btn{flex:1;max-width:25%;text-align:center;color:#0f172a;background:transparent;border:0;border-radius:.9rem;padding:.4rem .25rem;font-weight:600;display:flex;flex-direction:column;align-items:center;gap:2px}
.tabbar-btn .tab-ico{line-height:0;color:#0b3d73}
.tabbar-btn .tab-lab{font-size:.75rem}
.tabbar-btn.tab-active{background:var(--primary);color:#fff}
.tabbar-btn.tab-active .tab-ico{color:#fff}

/* 有底部导航时，提高地图底部工具条的避让距离 */
body.has-tabbar .map-bottombar{bottom:calc(env(safe-area-inset-bottom,0) + 4.2rem)}

/* 轻量 Toast 提示样式 */
.toast-root{position:fixed;top:calc(env(safe-area-inset-top,0) + 16px);left:0;right:0;display:flex;justify-content:center;z-index:2000;pointer-events:none}
.toast{pointer-events:auto;background:#0b1220;color:#fff;border-radius:.75rem;padding:.5rem .75rem;box-shadow:0 8px 24px rgba(0,0,0,.25);font-size:.875rem;opacity:.98}
.toast + .toast{margin-left:.5rem}

/* 设置页-底图列表 美观样式 */
.tile-item{display:flex;align-items:center;justify-content:space-between;gap:.75rem}
.tile-main{min-width:0}
.tile-title{font-weight:600;color:#0f172a;margin-bottom:2px}
.tile-url{font-size:.75rem;color:#475569}
.ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.tile-meta{display:flex;align-items:center;gap:.5rem}
.tile-badge{display:inline-block;background:rgba(2,6,23,.06);color:#0f172a;border-radius:9999px;padding:.125rem .5rem;font-size:.75rem}

/* Modal 对话框 */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.38);display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem}
.modal-backdrop.hidden{display:none}
.modal{width:100%;max-width:480px;background:#fff;border-radius:1rem;box-shadow:0 20px 40px rgba(0,0,0,.2);padding:1rem}
.modal-header{font-weight:700;color:#0f172a;margin-bottom:.25rem}
.modal-body{color:#334155}
.modal-actions{margin-top:1rem;display:flex;justify-content:flex-end;gap:.5rem}

/* --- 移动端专用覆盖：使手机端观感与桌面不同 --- */
@media (max-width:480px){
  body{background:linear-gradient(180deg,#eef2f7,#f7f9fc)}
  .theme-strip{height:8px}
  .card{border-radius:0;box-shadow:none;border-top:1px solid #e6ebf2;border-bottom:1px solid #e6ebf2}
  .input{padding:.7rem .95rem;font-size:16px;border-color:#d3dbe6}
  label{font-size:.9rem}
  .btn-primary,.btn-secondary{padding:.6rem 1rem;font-size:1rem;border-radius:1rem}
  .tabbar{padding:calc(env(safe-area-inset-bottom,0) + .5rem) .7rem .5rem}
  .tabbar-btn{padding:.55rem .35rem}
  .tabbar-btn .tab-lab{font-size:.78rem}
  /* 地图更沉浸：更高视窗与直角边 */
  #map{height:76vh!important;border-radius:0!important}
  /* 底部工具条在手机上更紧凑，支持横向滚动 */
  .map-bottombar{gap:.35rem;padding:.45rem .6rem;overflow:auto hidden}
  .map-bottombar .btn{min-width:80px}
}
